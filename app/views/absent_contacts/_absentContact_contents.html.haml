.infoArea
  .infoArea__infoHead
    .infoArea__infoHead__userRoom
      %h6 選択中のクラス
      .infoArea__infoHead__userRoom__roomName
        = @room.number
    .infoArea__infoHead__headBox
      %ul.headBtns
        %li.headBtn
          = link_to '欠席連絡', room_absent_contacts_path, class: "HeadBtn abscentContact"
        %li.headBtn
          = link_to '連絡帳', room_contact_books_path, class: "HeadBtn contactBook"
        %li.headBtn
          = link_to '配布手紙', room_letters_path, class: "HeadBtn letters"

  .infoArea__infoMenu
    %ul.breadCrumbsLink
      %li
        = link_to 'クラス選択', root_path, class: "roomSelectBtn"
      %li
        %i.fa.fa-chevron-right
      %li
        = link_to '連絡帳', room_contact_books_path, class: "contactBookSelectBtn"
      %li
        %i.fa.fa-chevron-right
      %li
        %p.letterSelect 欠席連絡
  -# trueがteacher side、falseがparent side
  -if current_user && current_user.admin?
    .infoArea__AbsentContact
      .infoArea__AbsentContact__absentContactForm
      .infoArea__AbsentContact__contactsHistory
        .infoArea__AbsentContact__contactsHistory__todayAbsentContactTitle
          本日の連絡
        .infoArea__AbsentContact__contactsHistory__TodayAbsentContact
          - if @today_absent_contact_for_teacher == nil
            今日は連絡がありません。
          - else
            - @today_absent_contact_for_teacher.each do |absentcontact|
              .AbsentContactBox
                .contactDate
                  =absentcontact.set_date
                .contactName
                  = absentcontact.user.child_name
                .contactKind
                  - if absentcontact.kind == "absent"
                    欠席
                  - elsif absentcontact.kind == "latein"
                    遅刻
                  - else
                    早退
                .contactReason 
                  = absentcontact.reason
                .contactConfirm
                  確認
        .infoArea__AbsentContact__contactsHistory__title
          受信履歴
        .infoArea__AbsentContact__contactsHistory__index
          - @absent_contacts_for_teacher.each do |absentcontact|
            .AbsentContactBox
              .contactDate
                =absentcontact.set_date
              .contactName
                = absentcontact.user.child_name
              .contactKind
                - if absentcontact.kind == "absent"
                  欠席
                - elsif absentcontact.kind == "latein"
                  遅刻
                - else
                  早退
              .contactReason 
                = absentcontact.reason
              .contactConfirm
                確認
  - else
    .infoArea__AbsentContact
      .infoArea__AbsentContact__absentContactForm
        .infoArea__AbsentContact__absentContactForm__FormHead
          連絡フォーム
        .infoArea__AbsentContact__absentContactForm__FormBox
          = form_with model: [@room, @absent_contact], class: "IputForm", local: true do |f|
            .InputBox
              .absentAt
                日付：
                = f.date_field :absent_at, placeholder: "いつ", class: "inputAbsentAT"
              .absentKind
                種類：
                = f.select :kind, AbsentContact.kinds_i18n.invert, {}, class: "inputKind"
              .absentReason
                理由・連絡：
                = f.text_area :reason, placeholder: "理由,連絡", class: "inputReason"
              .afterContact
                放課後担任から連絡が
                = f.select :after_contact, AbsentContact.after_contacts_i18n.invert, {}, class: "inputAfterContact"
              .SubmitBtn
                = f.submit '送信', class: "submit-btn" 
        .infoArea__AbsentContact__contactsHistory
          .infoArea__AbsentContact__contactsHistory__todayAbsentContactTitle
            本日の連絡
          .infoArea__AbsentContact__contactsHistory__TodayAbsentContact
            - if @today_absent_contact_for_parent == nil
              今日は連絡がありません。
            - else
              - @today_absent_contact_for_parent.each do |absentcontact|
                .AbsentContactBox
                  .contactDate
                    =absentcontact.set_date
                  .contactName
                    = absentcontact.user.child_name
                  .contactKind
                    - if absentcontact.kind == "absent"
                      欠席
                    - elsif absentcontact.kind == "latein"
                      遅刻
                    - else
                      早退
                  .contactReason 
                    = absentcontact.reason
                  .contactConfirm
                    連絡済
                  .contact_T_Confirm
                    先生未確認
          .infoArea__AbsentContact__contactsHistory__title
            送信履歴
          .infoArea__AbsentContact__contactsHistory__index
            - @absent_contacts_for_parent.each do |absentcontact|
              .AbsentContactBox
                .contactDate
                  =absentcontact.set_date
                .contactName
                  = current_user.child_name
                .contactKind
                  - if absentcontact.kind == "absent"
                    欠席
                  - elsif absentcontact.kind == "latein"
                    遅刻
                  - else
                    早退
                .contactReason 
                  = absentcontact.reason
                .contactConfirm
                  連絡済
                .contact_T_Confirm
                  先生未確認
